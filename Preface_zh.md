# 前言

## 本书适合谁？

当软件专业人员遇到复杂问题时，他们经常面临矛盾并难以找到解决方案。要克服这些挑战，关键是将棘手的问题视为获得重大回报的机会。拥抱困难的挑战可以带来宝贵的见解和突破。

凭借 20 年的问题解决经验，大多数服务器端软件中的挑战性问题都可以通过系统的逻辑分析来解决。尽管 MySQL 具有全球影响力，但它面临着各种各样的问题。解决这些 MySQL 问题的过程丰富了理解，并促成了独特见解的发展，这激发了本书的写作。

本书以 MySQL 挑战为案例研究，探索问题分析和解决策略。读者将通过实际案例和深入讨论，更深入地理解逻辑推理、数据结构、算法等内容。

本书涵盖以下主题：

1. **MySQL 的逻辑推理**：使用逻辑推理分析复杂 MySQL 问题的技术。
2. **计算机科学基础**：与 MySQL 相关的计算机科学基础知识。
3. **MySQL 内部原理**：MySQL 核心组件基础知识介绍。
4. **性能测试**：科学测试 MySQL 性能的方法。
5. **MySQL 8.0 改进**：MySQL 8.0 相对于 MySQL 5.7 的关键改进。
6. **MySQL 改进**：独立 MySQL 实例的进一步优化。
7. **组复制进展**：MySQL 组复制的显著增强。
8. **从库回放改进**：MySQL 从库回放的优化。
9. **性能优化技术**：优化 MySQL 应用程序的策略。

**本书的重点：**

基于增强 MySQL 可扩展性的目标，本书探讨了各种优化策略，以提高吞吐量、减少响应时间，并确保 MySQL 从库能够紧密匹配主服务器的性能，从而在大多数场景下实现延迟极低的高可用性故障转移。

**目标读者：**

1. **注重质量的开发人员**：致力于高质量软件开发的个人。
2. **问题解决者**：对解决复杂软件问题感兴趣的人。
3. **MySQL 爱好者**：希望从头开始了解 MySQL 的读者。
4. **测试从业者**：热衷于掌握有效测试技术的用户。
5. **软件架构师**：设计大规模软件系统的人。
6. **性能工程师**：在性能优化方面遇到困难的工程师。
7. **计算机科学学生**：旨在加强基础知识的学习者。
8. **MySQL 研究人员**：基于 MySQL 进行研究的研究人员。

## 本书大纲

第 1 部分完全专注于与 MySQL 相关的问题。第 1 章探讨用户如何处理和解决具有挑战性的 MySQL 问题。第 2 章关注 MySQL 8.0 中的神秘问题。

第 2 部分主要涵盖与问题解决相关的基础知识。第 3 章强调逻辑推理技能在有效解决 MySQL 挑战中的重要性。第 4 章提供了理解 MySQL 问题所必需的实用计算机基础知识。第 5 章介绍 MySQL 内核基础知识，为后续的问题解决讨论奠定基础。第 6 章涵盖测试 MySQL 的科学方法。

第 3 部分主要关注特定问题的分析和改进。第 7 章重点介绍 MySQL 8.0 中的显著优化。第 8 章探讨了解决 MySQL 8.0 特定问题的改进。第 9 章讨论 MySQL 组复制的增强功能，而第 10 章关注 MySQL 从库回放的改进。这些章节共同不仅提升了 MySQL 性能，还为实现高可用性集群奠定了基础。

第 4 部分主要从 MySQL 用户的角度分析性能改进。第 11 章介绍了在不更改代码的情况下提高 MySQL 8.0 应用程序性能的技术。

第 5 部分是总结。第 12 章概述了 MySQL 改进的未来方向并总结全书。

## 参考文献和延伸阅读

本书专注于分析和解决 MySQL 问题，因此建议具有一定的计算机科学背景。为了支持理解和保持连贯性，关键术语包含在附录的"术语表"部分。对于缺乏 MySQL 基础的读者，请参阅附录中的相关内容或查阅[专门的 MySQL 书籍](https://github.com/enhancedformysql/tech-explorer-hub) [69]。

## 特殊术语说明

1. **平衡回放速度**

   对于 MySQL 从库回放，这定义了平衡回放速度，即在正常情况下 MySQL 从库与主库匹配的速度。当速度等于或低于平衡回放速度时，从库上的事务回放进度不会出现显著延迟。但是，如果速度超过此阈值，从库在事务回放进度上开始落后于主库。

2. **双一**

   特指 MySQL 中的两个主要配置：*sync_binlog=1* 和 *innodb_flush_log_at_trx_commit=1*。

3. **MySQL 从库回放**

   该术语代表异步复制、半同步复制和组复制的通用回放过程。在本书中，一贯使用"MySQL 主库"表示 MySQL 源，"MySQL 从库"表示 MySQL 副本。

## 部署补充说明

在部署 MySQL 进行测试时，最好使测试环境尽可能接近生产环境，除非某些配置严重干扰性能分析。以下是测试过程中与 MySQL 部署相关的具体声明：

1. 使用的主流服务器都具有 4 路 NUMA 架构。
2. 服务器通常是 x86 架构。
3. 使用 NVMe SSD 硬件磁盘，I/O 延迟非常低。
4. 所有测试都在高性能服务器上进行，仅代表高性能服务器配置的结果。
5. 所有测试都在 Linux 操作系统上进行。
6. MySQL 独立测试通常使用 8.0.27 版本，而 MySQL 集群测试通常使用 8.0.32 版本。
7. 对 MySQL 的改进称为改进的 MySQL 或修改的 MySQL。
8. TPC-C 测试中的事务隔离级别为 *Read Committed*。
9. 用于事务的存储引擎是 InnoDB。
10. 除非另有说明，MySQL 组复制测试期间的默认模式是单主模式。
11. *binlog_format* 参数设置为基于行的格式。
12. MySQL，无论是主库还是从库，都使用 GTID（全局事务标识符）。
13. 集群设置包括 *replica_preserve_commit_order=on*。
14. 大多数测试基于 BenchmarkSQL TPC-C。
15. 除非另有说明，TPC-C 测试通常基于分区大表。
16. 由于测试数量众多，相关的软件、硬件和配置详见附录。

## 如何联系我们

有关与本书相关的配置、补丁和其他信息，请访问我们的网页：<https://github.com/enhancedformysql/>。

发送电子邮件至 [wangbin579@gmail.com](mailto:wangbin579@gmail.com) 以评论或询问有关本书的技术问题。

## 致谢

本书精心整理了众多个人贡献的丰富思想和知识，包括来自学术研究和工业实践的见解。在计算领域，人们自然倾向于追求最新的创新，然而我们的历史基础提供了宝贵的经验教训。本书参考了数十篇文章、博客文章、文档和其他资源，使其成为我的宝贵学习资源。我深深感谢这些作者慷慨贡献知识。

有几个人在本书的写作过程中至关重要，他们审阅草稿并提供反馈。我特别感谢王洪深、叶金荣、高日耀和高海涛的贡献。当然，本书中任何剩余的错误或有争议的观点都由我全权负责。

最后，我最深切地感谢我的家人，在这近六个月的写作过程中，他们的坚定支持是不可或缺的。你们是最棒的。

[下一页](Part1_zh.md)
